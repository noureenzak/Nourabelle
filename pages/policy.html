<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Returns & Exchange Policy - Nourabelle</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <!-- Navbar -->
  <header class="navbar">
    <!-- Hamburger for mobile -->
    <div class="hamburger" id="hamburger">
      <span></span><span></span><span></span>
    </div>

    <!-- Desktop nav -->
    <nav class="desktop-nav">
      <a href="../index.html">Home</a>
      <a href="products.html">Products</a>
      <a href="policy.html">Returns & Exchange</a>
      <a href="contactus.html">Contact Us</a>
    </nav>

    <!-- Logo -->
    <div class="nav-center">
      <a href="../index.html">
        <img src="../assets/images/logo.jpg" alt="Nourabelle Logo" class="hero-logo">
      </a>
    </div>
    
    <!-- Right Side Icons -->
    <div class="nav-actions">
      <!-- Search Icon -->
      <button class="search-btn" id="searchBtn" aria-label="Search">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
      </button>

      <!-- Login Icon -->
      <a href="../admin/login.html" class="login-btn" aria-label="Login">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="8" r="4"/>
          <path d="M6 20c0-3.3 2.7-6 6-6s6 2.7 6 6"/>
        </svg>
      </a>

      <!-- Cart Icon -->
      <div class="cart-icon-link">
        <a href="cart.html" aria-label="Cart">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 22c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/>
            <path d="M20 22c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
          </svg>
          <span id="cart-count" class="cart-count">0</span>
        </a>
      </div>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-header">
      <img src="../assets/images/logo.jpg" alt="Nourabelle" class="mobile-menu-logo">
      <button class="mobile-close" id="mobileClose">&times;</button>
    </div>

    <div class="mobile-menu-content">
      <a href="../index.html">Home</a>
      <a href="products.html">Products</a>
      <a href="policy.html">Returns & Exchange</a>
      <a href="contactus.html">Contact Us</a>
      <a href="../admin/login.html">Login</a>
    </div>
  </div>

  <!-- Search Overlay -->
  <div class="search-overlay" id="searchOverlay">
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Search products..." autocomplete="off">
      <button class="search-close" id="searchClose">&times;</button>
    </div>
    <div class="search-results" id="searchResults"></div>
  </div>

  <!-- Original Policy Section Design -->
  <section class="policy-section">
    <h2>RETURN & EXCHANGE POLICY</h2>
    
    <p>At Nourabelle, we take pride in ensuring our clients have the best shopping experience possible. To maintain this, we have a transparent policy in place:</p>
    
    <h3>TRY-ON POLICY</h3>
    <p>Clients are welcome to try on their purchased items while the courier waits at the door. If the items do not fit or meet expectations, they can be returned immediately to the courier without any additional charges, <strong>except for the shipping fees.</strong></p>
    <p><strong>"Once the courier leaves, returns are not accepted anymore."</strong></p>
    
    <h3>EXCHANGE POLICY</h3>
    <p>If you'd like to exchange an item, you have 6 days from receiving your order to request an exchange. <strong>Please note that customers are responsible for covering the shipping fees for the exchange.</strong></p>
    <p>To request an exchange, send us a message. Items must be in their original condition, unworn, and with tags still attached.</p>
    
    <div class="policy-help">
      <p><strong>Need assistance or have questions about our policy?</strong></p>
      
      <a href="contactus.html" class="policy-btn">Contact Our Team</a>
    </div>
  </section>

  <!-- Footer -->
  <footer id="contact">
    <div class="footer-content">
      <a href="https://www.instagram.com/nourabellebynour/" target="_blank" aria-label="Instagram" class="footer-icon-link">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.40s-.644-1.44-1.439-1.44z"/>
        </svg>
      </a>
      <a href="https://www.tiktok.com/@nourabellebynour" target="_blank" aria-label="TikTok" class="footer-icon-link">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M16 8.04c1.11.8 2.47 1.27 3.93 1.31V6.14a5.6 5.6 0 0 1-3.06-.95A5.7 5.7 0 0 1 14.73 2h-2.73v14.3a2.7 2.7 0 1 1-2.7-2.7c.37 0 .72.08 1.04.22V10.9a6 6 0 0 0-1.04-.09 5.7 5.7 0 1 0 5.7 5.7V8.04z"/>
        </svg>
      </a>
    </div>
    
    <div class="footer-links">
      <a href="policy.html" class="footer-link">Returns & Exchange</a>
      <span class="footer-dot"></span>
      <a href="contactus.html" class="footer-link">Contact Us</a>
    </div>
    
    <div class="footer-brand">
      <span class="brand-heart">♡</span>
      <span>Nourabelle</span>
      <span class="brand-heart">♡</span>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../js/config.js"></script>
  <script>
    // Mobile menu and search functionality for policy page
    document.addEventListener('DOMContentLoaded', function() {
      const hamburger = document.getElementById('hamburger');
      const mobileMenu = document.getElementById('mobileMenu');
      const mobileClose = document.getElementById('mobileClose');
      
      // Mobile menu functionality
      if (hamburger && mobileMenu && mobileClose) {
        let isMenuOpen = false;

        function openMenu() {
          isMenuOpen = true;
          hamburger.classList.add('active');
          mobileMenu.classList.add('open');
          document.body.classList.add('menu-open');
        }

        function closeMenu() {
          isMenuOpen = false;
          hamburger.classList.remove('active');
          mobileMenu.classList.remove('open');
          document.body.classList.remove('menu-open');
        }

        hamburger.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          isMenuOpen ? closeMenu() : openMenu();
        });

        mobileClose.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          closeMenu();
        });

        const menuLinks = mobileMenu.querySelectorAll('.mobile-menu-content a');
        menuLinks.forEach(link => {
          link.addEventListener('click', closeMenu);
        });

        mobileMenu.addEventListener('click', (e) => {
          if (e.target === mobileMenu) closeMenu();
        });

        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && isMenuOpen) closeMenu();
        });
      }

      // Search functionality
      setupSearch();
      updateCartCount();
    });

    // Search functionality that works with Supabase
    async function setupSearch() {
      const searchBtn = document.getElementById('searchBtn');
      const searchOverlay = document.getElementById('searchOverlay');
      const searchClose = document.getElementById('searchClose');
      const searchInput = document.getElementById('searchInput');
      const searchResults = document.getElementById('searchResults');

      if (!searchBtn || !searchOverlay) return;

      function openSearch() {
        searchOverlay.classList.add('open');
        if (searchInput) searchInput.focus();
      }

      function closeSearch() {
        searchOverlay.classList.remove('open');
        if (searchInput) searchInput.value = '';
        if (searchResults) searchResults.innerHTML = '';
      }

      async function performSearch() {
        if (!searchInput || !searchResults) return;
        
        const query = searchInput.value.toLowerCase().trim();
        
        if (query.length < 2) {
          searchResults.innerHTML = '';
          return;
        }

        try {
          searchResults.innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">Searching...</div>';

          const { data: products, error } = await supabase
            .from('products')
            .select('*')
            .eq('is_active', true)
            .or(`name.ilike.%${query}%,category.ilike.%${query}%,description.ilike.%${query}%`)
            .limit(6);

          if (error) throw error;

          if (!products || products.length === 0) {
            searchResults.innerHTML = `
              <div style="padding: 20px; text-align: center;">
                <p style="margin-bottom: 15px; color: #666;">No products found for "${query}"</p>
                <a href="products.html" style="padding: 10px 20px; background: var(--btn); color: white; text-decoration: none; border-radius: 6px; font-family: var(--font);">Browse All Products</a>
              </div>
            `;
            return;
          }

          searchResults.innerHTML = products.map(product => {
            const images = parsePostgreSQLArray(product.images);
            const image = images.length > 0 ? images[0] : '../assets/images/placeholder.jpg';
            
            return `
              <div style="display: flex; align-items: center; padding: 1rem; border-bottom: 1px solid #eee; cursor: pointer; transition: background 0.2s ease;"
                   onclick="window.location.href='product.html?id=${product.id}'; closeSearch();"
                   onmouseover="this.style.background='#f5f5f5';"
                   onmouseout="this.style.background='white';">
                <img src="${image}" alt="${product.name}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 6px; margin-right: 1rem;">
                <div>
                  <h4 style="margin: 0 0 0.25rem 0; color: var(--text);">${product.name}</h4>
                  <p style="margin: 0; color: #666; font-size: 0.9rem;">${product.price} EGP</p>
                </div>
              </div>
            `;
          }).join('');

        } catch (error) {
          console.error('Search error:', error);
          searchResults.innerHTML = `
            <div style="padding: 20px; text-align: center;">
              <p style="margin-bottom: 15px; color: #e74c3c;">Search error occurred</p>
              <a href="products.html" style="padding: 10px 20px; background: var(--btn); color: white; text-decoration: none; border-radius: 6px; font-family: var(--font);">Browse All Products</a>
            </div>
          `;
        }
      }

      searchBtn.addEventListener('click', openSearch);
      
      if (searchClose) {
        searchClose.addEventListener('click', closeSearch);
      }

      if (searchInput) {
        let searchTimeout;
        searchInput.addEventListener('input', () => {
          clearTimeout(searchTimeout);
          searchTimeout = setTimeout(performSearch, 300);
        });

        searchInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter' && searchInput.value.trim()) {
            window.location.href = `products.html?search=${encodeURIComponent(searchInput.value.trim())}`;
          }
        });
      }

      searchOverlay.addEventListener('click', (e) => {
        if (e.target === searchOverlay) closeSearch();
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && searchOverlay.classList.contains('open')) {
          closeSearch();
        }
      });

      window.closeSearch = closeSearch;
    }

    // Update cart count
    function updateCartCount() {
      try {
        const cart = JSON.parse(localStorage.getItem('nourabelle_cart') || '[]');
        const count = cart.reduce((total, item) => total + (item.quantity || 1), 0);
        
        const cartCountEl = document.getElementById('cart-count');
        if (cartCountEl) {
          cartCountEl.textContent = count;
          cartCountEl.style.display = count > 0 ? 'flex' : 'none';
        }
      } catch (e) {
        console.error('Error updating cart count:', e);
      }
    }
  </script>
</body>
</html>